/* CArtAgO + JaCa naive gradle build file 
 * - to be improved -
 *
 * Note:
 *
 * Task to create the distribution: makeDist
 *
 */

apply plugin: 'java'

version '2.2-SNAPSHOT'
sourceCompatibility = 1.7
targetCompatibility = 1.7

sourceSets {
  main {
      java {
        srcDir 'src/main/java'
      }
  }
  jaca {
      java {
        srcDir 'src/jaca/java'
      }
  }
}

/* still using local dep */
dependencies {
  compile files('libs/lipermi-0.4.jar')
  compile files('libs/jason.jar')
}

/* still not used */
repositories {
  mavenCentral()
	maven {
 	    url "http://jacamo.sourceforge.net/maven2"
  	}
}

task cartagoJar(type: Jar, dependsOn: classes) {
  baseName 'cartago'
  from sourceSets.main.allSource
}

task jacaJar(type: Jar, dependsOn: classes) {
  baseName 'jaca'
  from sourceSets.jaca.allSource
}
  

task makeDist (dependsOn: ['build','jar']) {
     copy {
          from '.'
          into 'build/dist/cartago-'+version
          include '*.html'
          include 'LICENSE'
          include 'README.md'
      }
      copy {
          from 'src/main/java'
          into 'build/dist/cartago-'+version+'/src/main'
          include('**')
      }
      copy {
          from 'src/jaca/java'
          into 'build/dist/cartago-'+version+'/src/jaca'
          include('**')
      }
      copy {
          from 'src/examples/java'
          into 'build/dist/cartago-'+version+'/examples/main'
          include('**')
      }
      copy {
          from 'src/examples/jaca'
          into 'build/dist/cartago-'+version+'/examples/jaca'
          include('**')
      }
      copy {
          from 'src/test/java'
          into 'build/dist/cartago-'+version+'/test/main'
          include('**')
      }
      copy {
          from 'src/test/jaca'
          into 'build/dist/cartago-'+version+'/test/jaca'
          include('**')
      }
      copy {
          from 'libs'
          into 'build/dist/cartago-'+version+'/lib'
          include('**')
      }
      copy {
          from 'docs/cartago_by_examples'
          into 'build/dist/cartago-'+version+'/doc'
          include('*.pdf')
      }
      cartagoJar {
        destinationDir = new File('build/dist/cartago-'+version+'/lib')
      }
      jacaJar {
        destinationDir = new File('build/dist/cartago-'+version+'/lib')
      }
}

artifacts {
    archives cartagoJar
    archives jacaJar
}

