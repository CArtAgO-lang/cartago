/* CArtAgO gradle build file */
apply plugin: 'java'

version '2.2-SNAPSHOT'

task hello << {
    println 'CArtAgO Gradle build file - '+version
}

repositories {
    mavenCentral()
		maven {
    	    url "http://jacamo.sourceforge.net/maven2"
    	}
}

sourceCompatibility = 1.7
targetCompatibility = 1.7


sourceSets {
  main {
      java {
        srcDir 'src/main/java'
      }
  }
  jaca {
      java {
        srcDir 'src/jaca/java'
      }
  }
}

	dependencies {
      compile files('libs/lipermi-0.4.jar')
      compile files('libs/jason.jar')
	}

  /*
  // copy dep jars and scritps into build directory
  task copyJarsToBuild {
    inputs.files configurations.runtime.files
    outputs.dir  'build/libs'
    doLast {
        copy {
            from configurations.runtime
            into 'build/libs'
        }
    }
  }

  jar {
    baseName 'cartago'
    version =  '2.2-SNAPSHOT'
    manifest {
        attributes 'Specification-Title': 'CArtAgO framework',
                   'Specification-Version': project.version,
                   'Implementation-Version': new Date().toString()
    }
  }

  jar.dependsOn(copyJarsToBuild)

  */

  task cartagoJar(type: Jar, dependsOn: classes) {
    baseName 'cartago'
    from sourceSets.main.allSource
  }

  task jacaJar(type: Jar, dependsOn: classes) {
    baseName 'jaca'
    from sourceSets.jaca.allSource
  }
  

  task makeDist (dependsOn: ['build','jar']) {
     copy {
          from '.'
          into 'build/dist/cartago-'+version
          include '*.html'
          include 'LICENSE'
          include 'README.md'
      }
      copy {
          from 'src/main/java'
          into 'build/dist/cartago-'+version+'/src/main'
          include('**')
      }
      copy {
          from 'src/jaca/java'
          into 'build/dist/cartago-'+version+'/src/jaca'
          include('**')
      }
      copy {
          from 'src/examples/java'
          into 'build/dist/cartago-'+version+'/examples/main'
          include('**')
      }
      copy {
          from 'src/examples/jaca'
          into 'build/dist/cartago-'+version+'/examples/jaca'
          include('**')
      }
      copy {
          from 'src/test/java'
          into 'build/dist/cartago-'+version+'/test/main'
          include('**')
      }
      copy {
          from 'src/test/jaca'
          into 'build/dist/cartago-'+version+'/test/jaca'
          include('**')
      }
      copy {
          from 'libs'
          into 'build/dist/cartago-'+version+'/lib'
          include('**')
      }
      copy {
          from 'docs/cartago_by_examples'
          into 'build/dist/cartago-'+version+'/doc'
          include('*.pdf')
      }
      cartagoJar {
        destinationDir = new File('build/dist/cartago-'+version+'/lib')
      }
      jacaJar {
        destinationDir = new File('build/dist/cartago-'+version+'/lib')
      }
  }

artifacts {
    archives cartagoJar
    archives jacaJar
}

